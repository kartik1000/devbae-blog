<!DOCTYPE html>

<html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- begin _includes/seo.html --><title>Linux Command Line Utility. - DevBae</title>
<meta name="description" content="Note: This blog is written entirely keeping Ubuntu in mind. (Leave Windows already :punch:).">


<meta name="author" content="Aashish Kumar">


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="DevBae">
<meta property="og:title"
  content="Linux Command Line Utility.">
<meta property="og:url" content="https://www.devbae.tech/python-command-line/">


<meta property="og:description" content="Note: This blog is written entirely keeping Ubuntu in mind. (Leave Windows already :punch:).">







<meta property="article:published_time" content="2020-05-12T00:00:00+00:00">






<link rel="canonical" href="https://www.devbae.tech/python-command-line/">













<!-- end _includes/seo.html -->
  
  <title>
    Linux Command Line Utility. - DevBae
    
  </title>

  <!-- Add favicon -->
  <link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico">

  <meta name="description" content="Note: This blog is written entirely keeping Ubuntu in mind. (Leave Windows already :punch:).">

  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="/assets/vendor/bootstrap/css/bootstrap.min.css">

  <!-- <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet"> -->
  <link rel="stylesheet" href="/assets/vendor/fontawesome-free/css/all.min.css">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://www.devbae.tech/python-command-line/">
  <link rel="alternate" type="application/rss+xml" title="DevBae" href="/feed.xml">

</head>


<body>

  <!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="/">DevBae</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fa fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/posts">Posts</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/contact">Contact</a>
        </li>
      </ul>
    </div>
  </div>
</nav>


  <!-- Page Header -->

  <header class="masthead" style="background-image: url('https://s30776.pcdn.co/wp-content/uploads/2020/04/AdobeStock_305233591.jpeg')">
   
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="post-heading">
            <h1>Linux Command Line Utility.</h1>
            
              <h2 class="subheading">Learn to have a custom command for your software.</h2>
            

            

            <span class="meta">Posted by
              
                
                  <a target="_blank" href="https://github.com/aashish-ak">Aashish Kumar</a>
                
              
              on May 12, 2020 · <span class="reading-time" title="Estimated read time">
  
   19 mins  read </span>

            </span>
          </div>
        </div>
      </div>
    </div>
  </header>

    <!-- Get the Details for sidebar -->
    
      
      
      <!-- Add the side bar -->
      <div id="sidebar">

        <!-- Loop for the authors -->
        

        <!-- For single author -->
        <div class="sidebar-author-details">
        
          

          <!-- Check if the user exists in frequent authors (authors.yml) -->
          

            
              <!-- Image URL -->
              <div class="author__avatar">
                <img src="https://avatars2.githubusercontent.com/u/21988675?s=400&amp;v=4" alt="Aashish Kumar" itemprop="image">
              </div>
            

            <!-- Devbae Name -->
            <div class="author__content">
              <h3 class="author__name" itemprop="name">Aashish Kumar</h3>
              
              
                <div class="author__bio" itemprop="description">
                  <p>Core Team Member, Programming Club, IIT Mandi</p>
                </div>
              
            </div>

            <!-- Author Links -->
            <div class="author__urls-wrapper">
              <button class="btn btn--inverse btn-show-urls">Follow</button>
              <ul class="author__urls social-icons">

                <!-- Loop and add the respective links here -->
                
                  <!-- Social Link -->
                  <li>
                    <a target="_blank" href="mailto:kumaraashish118@gmail.com" rel="nofollow noopener noreferrer">
                      <i class="fas fa-envelope-square"></i>
                      <span class="label">Email</span>
                    </a>
                  </li>
                
                  <!-- Social Link -->
                  <li>
                    <a target="_blank" href="https://github.com/aashish-ak" rel="nofollow noopener noreferrer">
                      <i class="fab fa-github"></i>
                      <span class="label">GitHub</span>
                    </a>
                  </li>
                
                  <!-- Social Link -->
                  <li>
                    <a target="_blank" href="https://www.linkedin.com/in/aashish-ak" rel="nofollow noopener noreferrer">
                      <i class="fab fa-linkedin"></i>
                      <span class="label">Linkedin</span>
                    </a>
                  </li>
                
                  <!-- Social Link -->
                  <li>
                    <a target="_blank" href="https://instagram.com/main.whi.hoon" rel="nofollow noopener noreferrer">
                      <i class="fab fa-instagram"></i>
                      <span class="label">Instagram</span>
                    </a>
                  </li>
                
              </ul>
            </div> <!-- End of author links-->
                
          
        </div> <!-- End of sidebar-author-details for multiple authors -->

        <!-- End of if which checks if the site authors are present or not -->
      
    </div> <!-- End of sidebar -->

    

  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-12 mx-auto">

        <!-- For the TOC -->
        


        <p><strong>Note: This blog is written entirely keeping Ubuntu in mind. (Leave Windows already <img class="emoji" title=":punch:" alt=":punch:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f44a.png" height="20" width="20">).</strong></p>

<p>This blog is a part of <a href="https://www.youtube.com/channel/UCtBQq6FAZHHQ7cyA_sxH1ww"><strong>DevBae Live</strong></a> series and the tutorial was recorded live on 26th July 2020. You can follow the video tutorial <a href="https://youtu.be/COCPzVhdZsk">here</a>.</p>

<p>An average coder runs at least 50 commands in a day (I just guessed it <img class="emoji" title=":stuck_out_tongue:" alt=":stuck_out_tongue:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f61b.png" height="20" width="20">). These commands range from updating your OS with <code class="highlighter-rouge">apt</code> to restarting your server again and again with <code class="highlighter-rouge">node start</code>. Some of the basic ones are used extensively in a day like <code class="highlighter-rouge">cd</code> or <code class="highlighter-rouge">python</code> etc.</p>

<p>Every command we run is a software in itself and the command is just a call to that software with required parameters. For e.g, if you have a software and you want a custom command for it so that you can use it through the command line as well. Today we’ll learn how can you easily build that within an hour using python.</p>

<p>Let’s take the command!</p>

<p>Today we’ll be building a simple custom command-line utility called <code class="highlighter-rouge">count_cli</code>, which will return the count of how many times you have run the command passed in arguments. For e.g, if I run:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">count_cli</span> <span class="o">-</span><span class="n">cmd</span> <span class="n">ssh</span>
</code></pre></div></div>

<p>It’ll tell me how many times I’ve run <code class="highlighter-rouge">ssh</code> so far, like this:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Command</span> <span class="o">-</span> <span class="n">ssh</span> <span class="n">has</span> <span class="n">been</span> <span class="n">used</span> <span class="mi">54</span> <span class="n">times</span><span class="p">.</span>
<span class="n">Thanks</span> <span class="k">for</span> <span class="n">using</span> <span class="n">count_cli</span> <span class="n">utility</span><span class="err">!</span>
</code></pre></div></div>

<p>We’re assuming that you have already installed <code class="highlighter-rouge">python3</code> and <code class="highlighter-rouge">pip3</code> in your system. Now first install a package called <code class="highlighter-rouge">argparse</code> using <code class="highlighter-rouge">pip</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pip3</span> <span class="n">install</span> <span class="n">argparse</span>
</code></pre></div></div>

<p>Now you have the desired package installed. Now create a file with a custom name, that you want for your command. Make sure it’s unique and there should not be any other software installed in your system with the same name. We’re naming it <code class="highlighter-rouge">count_cli</code> because that’s the command name that we want. Also, don’t add an extension in the file.</p>

<p>Bonus: You can create new files in ubuntu using <code class="highlighter-rouge">touch</code> command:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">touch</span> <span class="n">count_cli</span>
</code></pre></div></div>

<p>Now open this file using any text editor. We recommend installing <a href="https://www.sublimetext.com/">Sublime Text</a>. First, we’ll learn how to build an executable bash script, then we’ll convert it into a command-line interface (CLI).</p>

<p>Paste the following code in the <code class="highlighter-rouge">count_cli</code> file.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">"Hello World!"</span><span class="p">)</span>
</code></pre></div></div>

<p>The python code snippet simply prints “Hello World!”. Now in the terminal run the following command:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">$</span> <span class="p">.</span><span class="o">/</span><span class="n">count_cli</span>
</code></pre></div></div>

<p>which is simply to execute the script, but you’ll get an error, something like this:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Failed</span> <span class="n">to</span> <span class="n">execute</span> <span class="n">process</span> <span class="s">'./count_cli'</span><span class="p">.</span> <span class="n">Reason</span><span class="p">:</span>
<span class="k">exec</span><span class="p">:</span> <span class="n">Exec</span> <span class="nb">format</span> <span class="n">error</span>
<span class="n">The</span> <span class="nb">file</span> <span class="s">'./count_cli'</span> <span class="ow">is</span> <span class="n">marked</span> <span class="k">as</span> <span class="n">an</span> <span class="n">executable</span> <span class="n">but</span> <span class="n">could</span> <span class="ow">not</span> <span class="n">be</span> <span class="n">run</span> <span class="n">by</span> <span class="n">the</span> <span class="n">operating</span> <span class="n">system</span><span class="p">.</span>
</code></pre></div></div>

<p>Now we tried running the file without telling it which language or software to use to use to execute it, in other words, which <code class="highlighter-rouge">interpreter</code> to use, that’s why it threw an error. So to tell the interpreter, use the following snippet, this should be added at the top of the file:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/env python3
</span></code></pre></div></div>

<p>The <code class="highlighter-rouge">#!</code> is used to tell the location of the interpreter to the operating system. Here <code class="highlighter-rouge">/usr/bin/env</code> is the location we’ve set for the <code class="highlighter-rouge">python3</code> interpreter. Now execute the script again:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">$</span> <span class="p">.</span><span class="o">/</span><span class="n">count_cli</span>
<span class="n">Hello</span> <span class="n">World</span><span class="err">!</span>
</code></pre></div></div>

<p>If you run into any permission errors, simply make the script executable by running the following command:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">chmod</span> <span class="o">+</span><span class="n">x</span> <span class="n">count_cli</span>
</code></pre></div></div>

<p>You’ll see that it successfully prints <code class="highlighter-rouge">Hello World!</code>. Now that we successfully have a python script. Let’s add the command line tools to it. Paste the following code snippet in your file:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/env python3
</span>
<span class="kn">import</span> <span class="nn">argparse</span>

<span class="k">def</span> <span class="nf">custom</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Thanks for using count_cli utility!"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
  <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="p">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span> <span class="o">=</span> <span class="s">"This is count_cli command!"</span><span class="p">)</span>
  <span class="n">parser</span><span class="p">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">func</span> <span class="o">=</span> <span class="n">custom</span><span class="p">)</span>
  <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="p">.</span><span class="n">parse_args</span><span class="p">()</span>
  <span class="n">args</span><span class="p">.</span><span class="n">func</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
  <span class="n">main</span><span class="p">()</span>
</code></pre></div></div>

<p>After adding the interpreter, we’ve removed the <code class="highlighter-rouge">print("Hello World!")</code> code and imported the <code class="highlighter-rouge">argparse</code> library in the script. Then we added two functions in it, the <code class="highlighter-rouge">custom</code> function simply prints <code class="highlighter-rouge">Thanks for using count_cli utility!</code>, and the <code class="highlighter-rouge">main</code> function is where the magic is happening.</p>

<p>We’ve created an object of the <code class="highlighter-rouge">ArgumentParser</code> class of the <code class="highlighter-rouge">argparse</code> library, and set the description of the CLI tool as <code class="highlighter-rouge">This is count_cli command!</code> in the following line:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="p">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span> <span class="o">=</span> <span class="s">"This is count_cli command!"</span><span class="p">)</span>
</code></pre></div></div>

<p>This description will be displayed when you’ll run the command with <code class="highlighter-rouge">-h</code> or <code class="highlighter-rouge">--help</code> flag.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">$</span> <span class="p">.</span><span class="o">/</span><span class="n">count_cli</span> <span class="o">--</span><span class="n">help</span>

<span class="n">usage</span><span class="p">:</span> <span class="n">count_cli</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span>

<span class="n">This</span> <span class="ow">is</span> <span class="n">count_cli</span> <span class="n">command</span><span class="err">!</span>

<span class="n">optional</span> <span class="n">arguments</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>  <span class="n">show</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="nb">exit</span>
</code></pre></div></div>

<p>We’re setting the default function of the argparse as <code class="highlighter-rouge">main</code>, parsing arguments and then running the default function i.e <code class="highlighter-rouge">main</code> with the parsed args in the following line:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">parser</span><span class="p">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">func</span> <span class="o">=</span> <span class="n">custom</span><span class="p">)</span> <span class="c1">#setting default func
</span><span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="p">.</span><span class="n">parse_args</span><span class="p">()</span> <span class="c1">#parsing args
</span><span class="n">args</span><span class="p">.</span><span class="n">func</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="c1">#calling main func with parsed args
</span></code></pre></div></div>

<p>Now run the script:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">.</span><span class="o">/</span><span class="n">count_cli</span>

<span class="c1"># Output:
</span><span class="n">Thanks</span> <span class="k">for</span> <span class="n">using</span> <span class="n">count_cli</span> <span class="n">utility</span><span class="err">!</span>
</code></pre></div></div>

<p>As of now we’ve not passed any args. Let’s add some and make it interesting, change the <code class="highlighter-rouge">main</code> function to this:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
  <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="p">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span> <span class="o">=</span> <span class="s">"This is count_cli command!"</span><span class="p">)</span>
  <span class="n">parser</span><span class="p">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">"-cmd"</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s">"The Command whose count needs  to be printed."</span> <span class="p">,</span> <span class="n">dest</span> <span class="o">=</span> <span class="s">"cmd"</span><span class="p">,</span> <span class="nb">type</span> <span class="o">=</span> <span class="nb">str</span><span class="p">,</span> <span class="n">required</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
  <span class="n">parser</span><span class="p">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">func</span> <span class="o">=</span> <span class="n">custom</span><span class="p">)</span>
  <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="p">.</span><span class="n">parse_args</span><span class="p">()</span>
  <span class="n">args</span><span class="p">.</span><span class="n">func</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</code></pre></div></div>

<p>We added the following extra line this time, which adds the argument <code class="highlighter-rouge">-cmd</code> with its description in <code class="highlighter-rouge">help</code> and <code class="highlighter-rouge">dest=cmd</code>, means we can use the value of this argument using <code class="highlighter-rouge">args.cmd</code> after parsing, which we’ll do in a minute, specified the type as <code class="highlighter-rouge">str</code> which stands for string and set required as <code class="highlighter-rouge">True</code>, which means without this argument, the script will throw an error:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">parser</span><span class="p">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">"-cmd"</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s">"The Command whose count needs to be printed."</span> <span class="p">,</span> <span class="n">dest</span> <span class="o">=</span> <span class="s">"cmd"</span><span class="p">,</span> <span class="nb">type</span> <span class="o">=</span> <span class="nb">str</span><span class="p">,</span> <span class="n">required</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
</code></pre></div></div>

<p>You can have as many arguments as you want, just copy this line and edit it accordingly. Now run the script with the <code class="highlighter-rouge">--help</code> flag:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">$</span> <span class="p">.</span><span class="o">/</span><span class="n">count_cli</span>

<span class="n">usage</span><span class="p">:</span> <span class="n">count_cli</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="o">-</span><span class="n">cmd</span> <span class="n">CMD</span>

<span class="n">This</span> <span class="ow">is</span> <span class="n">count_cli</span> <span class="n">command</span><span class="err">!</span>

<span class="n">optional</span> <span class="n">arguments</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>  <span class="n">show</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="nb">exit</span>
  <span class="o">-</span><span class="n">cmd</span> <span class="n">CMD</span>    <span class="n">The</span> <span class="n">Command</span> <span class="n">whose</span> <span class="n">count</span> <span class="n">needs</span> <span class="n">to</span> <span class="n">be</span> <span class="n">printed</span><span class="p">.</span>
</code></pre></div></div>

<p>You can see the <em>help</em> description of <code class="highlighter-rouge">-cmd</code> argument in it. You can also run the script without using the <code class="highlighter-rouge">-cmd</code> argument, it’ll throw the following error:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">$</span> <span class="p">.</span><span class="o">/</span><span class="n">count_cli</span>

<span class="n">usage</span><span class="p">:</span> <span class="n">count_cli</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="o">-</span><span class="n">cmd</span> <span class="n">CMD</span>
<span class="n">count_cli</span><span class="p">:</span> <span class="n">error</span><span class="p">:</span> <span class="n">argument</span> <span class="o">-</span><span class="n">cmd</span> <span class="ow">is</span> <span class="n">required</span>
</code></pre></div></div>

<p>Now that we’ve successfully added the argument, let’s use it. Change your <code class="highlighter-rouge">custom</code> function to the following:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">custom</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
  <span class="k">print</span><span class="p">(</span><span class="s">"Cmd - "</span> <span class="o">+</span> <span class="n">args</span><span class="p">.</span><span class="n">cmd</span><span class="p">)</span>
  <span class="s">'''

        Your app should be connected here and the
        relevant functions should be called here.
        The entire logic of your app should use the args parsed from the command line.

  '''</span>
  <span class="k">print</span><span class="p">(</span><span class="s">"Thanks for using count_cli utility!"</span><span class="p">)</span>
</code></pre></div></div>

<p>Now if you run the script and pass some <code class="highlighter-rouge">cmd</code> argument, it’ll be printed:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">$</span> <span class="p">.</span><span class="o">/</span><span class="n">count_cli</span> <span class="o">-</span><span class="n">cmd</span> <span class="n">customArg</span>

<span class="n">Cmd</span> <span class="o">-</span> <span class="n">customArg</span>
<span class="n">Thanks</span> <span class="k">for</span> <span class="n">using</span> <span class="n">count_cli</span> <span class="n">utility</span><span class="err">!</span>
</code></pre></div></div>

<p>Booyah! You now have a custom command-line tool. Now let’s add the logic of <code class="highlighter-rouge">count_cli</code> i.e displaying, how many times the command passed in arguments has been run, replace your <code class="highlighter-rouge">custom</code> function with this:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Importing expanduser function to get the home directory
</span><span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">expanduser</span>
<span class="n">homedir</span> <span class="o">=</span> <span class="n">expanduser</span><span class="p">(</span><span class="s">"~"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">custom</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Cmd - "</span> <span class="o">+</span> <span class="n">args</span><span class="p">.</span><span class="n">cmd</span><span class="p">)</span>

    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="s">'''
      Opening the bash history file.
      Use the following line instead for fish shell.
      history_file = open(homedir + "/.config/fish/fish_history")
    '''</span>
    <span class="n">history_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">homedir</span> <span class="o">+</span> <span class="s">"/.bash_history"</span><span class="p">)</span>

    <span class="c1"># Iterating through the file and incrementing count whenever cmd command is found in the file.
</span>    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">history_file</span><span class="p">:</span>
      <span class="n">line_</span> <span class="o">=</span> <span class="n">line</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">' '</span><span class="p">)</span>
      <span class="k">if</span><span class="p">(</span><span class="n">line_</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">):</span>
        <span class="k">if</span><span class="p">((</span><span class="n">args</span><span class="p">.</span><span class="n">cmd</span> <span class="ow">in</span> <span class="n">line_</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">or</span> <span class="p">(</span><span class="n">line_</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">'sudo'</span> <span class="ow">and</span> <span class="n">line_</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">args</span><span class="p">.</span><span class="n">cmd</span><span class="p">)):</span>
          <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="c1"># Printing the count.
</span>    <span class="k">print</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">Command - "</span> <span class="o">+</span> <span class="n">args</span><span class="p">.</span><span class="n">cmd</span> <span class="o">+</span> <span class="s">" has occoured "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="o">+</span> <span class="s">" times."</span><span class="p">)</span>
    <span class="n">history_file</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">print</span><span class="p">(</span><span class="s">"Thanks for using count_cli utility!"</span><span class="p">)</span>
</code></pre></div></div>

<p>We simply used the <code class="highlighter-rouge">history</code> file which contains the history of the shell of the terminal used for running the commands, and searched the given command <code class="highlighter-rouge">cmd</code> in it and incremented the count. Now if you run the script, the following will be the output:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">$</span> <span class="p">.</span><span class="o">/</span><span class="n">count_cli</span> <span class="o">-</span><span class="n">cmd</span> <span class="n">ssh</span>
<span class="n">Cmd</span> <span class="o">-</span> <span class="n">ssh</span>

<span class="n">Command</span> <span class="o">-</span> <span class="n">ssh</span> <span class="n">has</span> <span class="n">occurred</span> <span class="mi">20</span> <span class="n">times</span><span class="p">.</span>
<span class="n">Thanks</span> <span class="k">for</span> <span class="n">using</span> <span class="n">count_cli</span> <span class="n">utility</span><span class="err">!</span>
</code></pre></div></div>

<p>In my shell, I’ve used SSH 20 times. Following is the final script that we created:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/env python
</span>
<span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">expanduser</span>
<span class="n">homedir</span> <span class="o">=</span> <span class="n">expanduser</span><span class="p">(</span><span class="s">"~"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">custom</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Cmd - "</span> <span class="o">+</span> <span class="n">args</span><span class="p">.</span><span class="n">cmd</span><span class="p">)</span>

    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="s">'''
      Opening the bash history file.
      Use the following line instead for fish shell.
      history_file = open(homedir + "/.config/fish/fish_history")
    '''</span>
    <span class="n">history_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">homedir</span> <span class="o">+</span> <span class="s">"/.bash_history"</span><span class="p">)</span>

    <span class="c1"># Iterating through the file and incrementing count whenever cmd command is found in the file.
</span>    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">history_file</span><span class="p">:</span>
      <span class="n">line_</span> <span class="o">=</span> <span class="n">line</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">' '</span><span class="p">)</span>
      <span class="k">if</span><span class="p">(</span><span class="n">line_</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">):</span>
        <span class="k">if</span><span class="p">((</span><span class="n">args</span><span class="p">.</span><span class="n">cmd</span> <span class="ow">in</span> <span class="n">line_</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">or</span> <span class="p">(</span><span class="n">line_</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">'sudo'</span> <span class="ow">and</span> <span class="n">line_</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">args</span><span class="p">.</span><span class="n">cmd</span><span class="p">)):</span>
          <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="c1"># Printing the count.
</span>    <span class="k">print</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">Command - "</span> <span class="o">+</span> <span class="n">args</span><span class="p">.</span><span class="n">cmd</span> <span class="o">+</span> <span class="s">" has occoured "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="o">+</span> <span class="s">" times."</span><span class="p">)</span>
    <span class="n">history_file</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">print</span><span class="p">(</span><span class="s">"Thanks for using count_cli utility!"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
  <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="p">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span> <span class="o">=</span> <span class="s">"This is count_cli command!"</span><span class="p">)</span>
  <span class="n">parser</span><span class="p">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">func</span> <span class="o">=</span> <span class="n">custom</span><span class="p">)</span>
  <span class="n">parser</span><span class="p">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">"-cmd"</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s">"The Command whose count needs to be printed."</span> <span class="p">,</span> <span class="n">dest</span> <span class="o">=</span> <span class="s">"cmd"</span><span class="p">,</span> <span class="nb">type</span> <span class="o">=</span> <span class="nb">str</span><span class="p">,</span> <span class="n">required</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
  <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="p">.</span><span class="n">parse_args</span><span class="p">()</span>
  <span class="n">args</span><span class="p">.</span><span class="n">func</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
  <span class="n">main</span><span class="p">()</span>
</code></pre></div></div>

<p>Awesome, now we’ve successfully created <code class="highlighter-rouge">count_cli</code>, but there’s one last thing to do. As of now, you have to open the directory in which you’ve created the <code class="highlighter-rouge">count_cli</code> file and then have to run it, to get the results. But you should be able to run it in any directory. That can only be done by pasting your script in the <code class="highlighter-rouge">/usr/bin</code> folder. This folder contains all the programs/software that you download and can run through your command line. You need to have superuser access to do this, run the following command:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sudo</span> <span class="n">cp</span> <span class="p">.</span><span class="o">/</span><span class="n">count_cli</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span>
</code></pre></div></div>

<p>Now you can run this script from any directory simply with the <code class="highlighter-rouge">count_cli</code> command like this:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">$</span> <span class="n">count_cli</span> <span class="o">-</span><span class="n">h</span>
<span class="n">usage</span><span class="p">:</span> <span class="n">count_cli</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="o">-</span><span class="n">cmd</span> <span class="n">CMD</span>

<span class="n">This</span> <span class="ow">is</span> <span class="n">count_cli</span> <span class="n">command</span><span class="err">!</span>

<span class="n">optional</span> <span class="n">arguments</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>  <span class="n">show</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="nb">exit</span>
  <span class="o">-</span><span class="n">cmd</span> <span class="n">CMD</span>    <span class="n">The</span> <span class="n">Command</span> <span class="n">whose</span> <span class="n">count</span> <span class="n">needs</span> <span class="n">to</span> <span class="n">be</span> <span class="n">printed</span><span class="p">.</span>
</code></pre></div></div>

<p>Hurray! You now have a custom command-line utility. This was just a basic tool that we created, you can create a command-line version of your software through this. We can’t wait to see what you do with this awesome tool <img class="emoji" title=":heart:" alt=":heart:" src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png" height="20" width="20">.</p>

<p>Happy Coding!!</p>

<p>You can watch the video version of this tutorial as a part of <strong>DevBae Live</strong> <a href="https://youtu.be/COCPzVhdZsk">here</a>.</p>

<p><strong>Note: If you think there’s anything wrong in this article or something that can be improved in any way, feel free to point out in the comments.</strong></p>


        <hr>

        <section class="page__share">
  
  <h4 class="page__share-title">Share on</h4>

  <a href="https://twitter.com/intent/tweet?text=Linux+Command+Line+Utility.%20https%3A%2F%2Fwww.devbae.tech%2Fpython-command-line%2F" class="btn btn-twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=1000,height=1000,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="http://www.facebook.com/share.php?u=https%3A%2F%2Fwww.devbae.tech%2Fpython-command-line%2F" class="btn btn-facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=1000,height=1000,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.devbae.tech%2Fpython-command-line%2F" class="btn btn-linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=1000,height=1000,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>

        
          <div id="disqus_thread"></div>
<script>

  /**
  *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
  *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
  
  var disqus_config = function () {
  this.page.url = page.url;  // Replace PAGE_URL with your page's canonical URL variable
  this.page.identifier = page.id; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
  };
  
  (function () { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://devbae.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    s.setAttribute('SameSite', "none Secure");
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by
    Disqus.</a>
</noscript>
          <hr>
        


        <div class="clearfix">

          
            <a class="btn btn-primary float-left" href="/Introduction-to-AI/" data-toggle="tooltip" data-placement="top" title="Artificial Intelligence - Part 1">← Previous<span class="d-none d-md-inline">
                Post</span></a>
          
          
            <a class="btn btn-primary float-right" href="/State-Space-Search/" data-toggle="tooltip" data-placement="top" title="Artificial Intelligence - Part 2.1">Next<span class="d-none d-md-inline">
                Post</span> →</a>
          

        </div>
      </div>
    </div>
  </div>


  <!-- Footer -->

<hr>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <ul class="list-inline text-center">
          
          <li class="list-inline-item">
            <a href="mailto:contact@devbae.tech">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="far fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          
          
          
          <li class="list-inline-item">
            <a href="https://github.com/devbae">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="copyright text-muted">Copyright © DevBae 2020</p>
      </div>
    </div>
  </div>
</footer>


  <script src="/assets/vendor/jquery/jquery.min.js"></script>
<script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/assets/vendor/startbootstrap-clean-blog/js/clean-blog.min.js"></script>

<script src="/assets/scripts.js"></script>
<script id="dsq-count-scr" src="//devbae.disqus.com/count.js" samesite="none Secure" async></script>




  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-165164055-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-165164055-1');
</script>



</body>

</html>
